
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åæ”¯ç®¡ç†ã‚¢ãƒ—ãƒª</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
	<script defer>
	    document.addEventListener("DOMContentLoaded", function() {
	        // âœ… ä»Šæ—¥ã®æ—¥ä»˜ã‚’ã‚»ãƒƒãƒˆ
	        const today = new Date();
	        const yyyy = today.getFullYear();
	        const mm = String(today.getMonth() + 1).padStart(2, '0');
	        const dd = String(today.getDate()).padStart(2, '0');
	        document.getElementById('date').value = `${yyyy}-${mm}-${dd}`;

	        // âœ… æ”¯å‡ºã‚’é¸ã‚“ã ã‚‰é‡‘é¡ã‚’ãƒã‚¤ãƒŠã‚¹ã«ã™ã‚‹
	        const typeSelect = document.getElementById("type");
	        const amountInput = document.getElementById("amount");

	        typeSelect.addEventListener("change", function() {
	            let value = amountInput.value;
	            
	            if (typeSelect.value === "æ”¯å‡º") {
	                if (value && !value.startsWith("-")) {
	                    amountInput.value = "-" + value;
	                }
	            } else {
	                amountInput.value = value.replace("-", ""); // åå…¥ãªã‚‰ãƒã‚¤ãƒŠã‚¹ã‚’å‰Šé™¤
	            }
	        });

	        amountInput.addEventListener("input", function() {
	            if (typeSelect.value === "æ”¯å‡º" && !amountInput.value.startsWith("-")) {
	                amountInput.value = "-" + amountInput.value;
	            }
	        });
	    });
	</script>


	</head>
<body>
    <div class="container mt-4">
        <h1 class="text-center">ğŸ’° åæ”¯ç®¡ç†ã‚¢ãƒ—ãƒª</h1>

        <!-- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
		<!-- âœ… è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ ã®ä¿®æ­£ -->
		<form method="POST" action="/">  <!-- â† action="/" ã‚’è¿½åŠ  -->
		    <div class="mb-3">
		        <label for="date" class="form-label">æ—¥ä»˜</label>
		        <input type="date" class="form-control" id="date" name="date" required>
		    </div>
		    <div class="mb-3">
		        <label for="item" class="form-label">é …ç›®</label>
		        <select class="form-select" id="item" name="item" required>
		            <option value="ç”Ÿæ´»è²»">ç”Ÿæ´»è²»</option>
		            <option value="é£Ÿè²»">é£Ÿè²»</option>
		            <option value="åå…¥">åå…¥</option>
		        </select>
		    </div>
		    <div class="mb-3">
		        <label for="type" class="form-label">ç¨®é¡</label>
		        <select class="form-control" id="type" name="type" required>
		            <option value="åå…¥">åå…¥</option>
		            <option value="æ”¯å‡º">æ”¯å‡º</option>
		        </select>
		    </div>
		    <div class="mb-3">
		        <label for="amount" class="form-label">é‡‘é¡</label>
		        <input type="number" class="form-control" id="amount" name="amount" required>
		    </div>
		    <button type="submit" class="btn btn-primary">è¿½åŠ </button>
		</form>

		<!-- âœ… æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ ã®ä¿®æ­£ -->
		<form method="GET" action="/search">  <!-- action="/search" ã®ã¾ã¾ -->
		    <input type="text" class="form-control" name="query" placeholder="æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰">
		    <button type="submit" class="btn btn-secondary">æ¤œç´¢</button>
		</form>


        
		{% if query %}
		<p>ã€Œ{{ query }}ã€ã®æ¤œç´¢çµæœ:</p>
		{% endif %}

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>æ—¥ä»˜</th>
                    <th>é …ç›®</th>
                    <th>ç¨®é¡</th>
                    <th>é‡‘é¡</th>
                </tr>
            </thead>
            <tbody>
                {% for record in records %}
                <tr>
                    <td>{{ record[0] }}</td>
                    <td>{{ record[1] }}</td>
                    <td>{{ record[2] }}</td>
                    <td>{{ record[3] }}å††</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>